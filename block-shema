Блок-схема:
Начало
Проверка пустых полей:
Условие: String.IsNullOrEmpty(tbLogin.Text) || String.IsNullOrEmpty(tbPassword.Text)
Да:
Действие: Показать сообщение "Нужно заполнить все поля"
Действие: Завершить (Конец)
Нет: Продолжить
Поиск пользователя:
Действие: var curUser = db.Users.Where(u => u.Login == tbLogin.Text && u.Password == tbPassword.Text).FirstOrDefault();
Проверка существования пользователя:
Условие: curUser != null
Нет:
Действие: Показать сообщение "Неверные учетные данные"
Действие: Завершить (Конец)
Да: Продолжить
Проверка роли пользователя:
Условие: curUser.RoleID == db.Roles.Where(r => r.Title == "Пользователь").FirstOrDefault().RoleID
Да:
Действие: Открыть WindowClientProfile
Действие: Закрыть текущее окно (Конец)
Нет: Продолжить
Условие: curUser.RoleID == db.Roles.Where(r => r.Title == "Администратор").FirstOrDefault().RoleID
Да:
Действие: Открыть WindowCheckRole с параметром "Администратор"
Действие: Закрыть текущее окно (Конец)
Нет: Продолжить
Условие: curUser.RoleID == db.Roles.Where(r => r.Title == "Мастер").FirstOrDefault().RoleID
Да:
Действие: Открыть WindowCheckRole с параметром "Мастер"
Действие: Закрыть текущее окно (Конец)
Конец
Пошаговая инструкция для построения блок-схемы:
Начните с прямоугольника, обозначающего Начало.
Нарисуйте следующий прямоугольник с условием Проверка пустых полей.
Из этого прямоугольника нарисуйте ромб, обозначающий условие Поля пусты?.
От ромба нарисуйте стрелку к прямоугольнику с действием Показать сообщение: "Нужно заполнить все поля" и затем к Конец, если условие истино.
От ромба нарисуйте стрелку к следующему прямоугольнику Поиск пользователя, если условие ложно.
Нарисуйте ромб с условием Пользователь найден?.
От ромба нарисуйте стрелку к прямоугольнику с действием Показать сообщение: "Неверные учетные данные" и затем к Конец, если условие ложно.
От ромба нарисуйте стрелку к следующему прямоугольнику Проверка роли пользователя, если условие истино.
Нарисуйте три ромба для проверки ролей:
Первый ромб для проверки роли Пользователь.
Второй ромб для проверки роли Администратор.
Третий ромб для проверки роли Мастер.
От каждого ромба нарисуйте стрелки к соответствующим действиям:
Открыть WindowClientProfile и закрыть текущее окно для роли "Пользователь".
Открыть WindowCheckRole("Администратор") и закрыть текущее окно для роли "Администратор".
Открыть WindowCheckRole("Мастер") и закрыть текущее окно для роли "Мастер".
Завершите блок-схему прямоугольником Конец.
